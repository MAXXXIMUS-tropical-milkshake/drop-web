(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{8187:(e,t,s)=>{Promise.resolve().then(s.bind(s,1124))},1124:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5155),n=s(2115);class i{static async feed(e){let t=await fetch("".concat("http://localhost:8083","/v1/feed/audio"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:e}}),s=await t.json();return t.ok?{success:!0,data:s}:{success:!1,data:{...s,status:t.status}}}}let o="http://localhost:8080";class r{static async login(e){let t=await fetch("".concat(o,"/v1/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})}),s=await t.json();return t.ok?{success:!0,data:s}:{success:!1,data:{...s,status:t.status}}}static async signup(e){let t=await fetch("".concat(o,"/v1/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();return t.ok?{success:!0,data:s}:{success:!1,data:{...s,status:t.status}}}static async verify(e){let t=await fetch("".concat(o,"/v1/auth/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e.code})});return t.ok?{success:!0,data:void 0}:{success:!1,data:{...await t.json(),status:t.status}}}static async refreshToken(e){let t=await fetch("".concat(o,"/v1/auth/token/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e.refreshToken})}),s=await t.json();return t.ok?{success:!0,data:s}:{success:!1,data:{...s,status:t.status}}}static async sendEmail(e){console.log(e);let t=new URLSearchParams(e).toString(),s=await fetch("".concat(o,"/v1/auth/email/send?").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});return s.ok?{success:!0,data:void 0}:{success:!1,data:{...await s.json(),status:s.status}}}}class c{static async withRefreshToken(e,t){let s=await t(e.accessToken);if(s.success)return s;if(401===s.data.status){let s=await r.refreshToken({refreshToken:e.refreshToken});return s.success?(e.refresh(s.data.accessToken,s.data.refreshToken),t(s.data.accessToken)):(e.refresh(null,null),s)}return s}}let l=(0,n.createContext)({signIn:()=>Promise.resolve(!1),signOut:()=>null,refresh:()=>null,accessToken:null,refreshToken:null,isLoading:!1});var d=s(5672),h=s(1536),u=s(4367);function f(e,t,s,n){let{id:i,name:o,artist:r,image:c}=t;return(0,a.jsxs)("div",{style:{display:"flex",flex:1,justifyContent:"flex-end",flexDirection:"column",clipPath:"url(#squircleClip)",alignSelf:"center",background:"#FF1158",height:"60vh",maxHeight:1200,width:"80vw",maxWidth:600},children:[(0,a.jsx)("div",{style:{visibility:"hidden",flex:1}}),(0,a.jsx)("button",{style:{...m.pauseButton,margin:"auto",justifyContent:"center"},onClick:()=>n(!s),children:s?(0,a.jsx)(h.gSK,{size:27,color:"#fff"}):(0,a.jsx)(h.kwt,{size:27,color:"#fff"})}),(0,a.jsxs)("div",{style:{flex:1,flexDirection:"column",display:"flex",justifyContent:"flex-end"},children:[(0,a.jsxs)("div",{style:{margin:20},children:[(0,a.jsx)("div",{children:(0,a.jsx)("span",{style:m.trackTitle,children:o||"Untitled"})}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{style:m.artistName,children:r||"Unknown Artist"})})]}),(0,a.jsxs)("div",{style:{...m.footer,flexShrink:0},children:[(0,a.jsxs)("button",{style:{...m.iconButton,flex:2,flexShrink:0},children:[(0,a.jsx)(u.qqM,{size:20,color:"#fff"}),"скачать"]}),(0,a.jsx)("button",{style:{...m.iconButton,flex:1,flexShrink:0},children:(0,a.jsx)(h.zyo,{size:20,color:"#fff"})}),(0,a.jsx)("button",{style:{...m.iconButton,flex:1,flexShrink:0},children:(0,a.jsx)(h.eb3,{size:20,color:"#fff"})})]})]}),(0,a.jsx)("svg",{width:"1",height:"1",viewBox:"0 0 1 1",style:{position:"absolute"},fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"hidden",children:(0,a.jsx)("clipPath",{id:"squircleClip",clipPathUnits:"objectBoundingBox",children:(0,a.jsx)("path",{d:"M 0,0.5 C 0,0  0,0  0.5,0 1,0  1,0  1,0.5 1,1  1,1  0.5,1 0,1  0,1  0,0.5"})})})]})}function p(){let[e,t]=(0,n.useState)([]),{isLoading:s,accessToken:o,refreshToken:r,refresh:h}=(0,n.useContext)(l),[u,p]=n.useState(null),[m,x]=n.useState(null);(0,n.useEffect)(()=>{o&&r&&(async()=>{let e=await c.withRefreshToken({accessToken:o,refresh:h,refreshToken:r},i.feed),s=await c.withRefreshToken({accessToken:o,refresh:h,refreshToken:r},i.feed);if(e.success&&s.success){p(e.data.id),k(!1),x(0),t([{index:0,id:e.data.id,name:e.data.name,artist:e.data.beatmaker.pseudonym},{index:1,id:s.data.id,name:s.data.name,artist:s.data.beatmaker.pseudonym}]);return}x(null)})().catch(e=>console.error(e))},[s]),(0,n.useEffect)(()=>{(async()=>{u&&console.log("playing")})().catch(e=>console.error(e))},[m,s]);let[g,k]=n.useState(!0);return(0,n.useEffect)(()=>{},[g]),(0,a.jsxs)(d.RC,{style:{display:"flex",flex:1,height:"100%",flexDirection:"column",alignItems:"center"},pagination:!0,slidesPerView:1.6,spaceBetween:50,centeredSlides:!0,direction:"vertical",onSlideChange:()=>console.log("slide change"),onSwiper:e=>console.log(e),children:[(0,a.jsx)(d.qr,{children:f(1,{id:"1",name:"lolkek",artist:"cheburek",image:"https://example.com/path-to-image.jpg"},g,k)}),(0,a.jsx)(d.qr,{children:f(1,{id:"2",name:"lolkek",artist:"cheburek",image:"https://example.com/path-to-image.jpg"},g,k)}),(0,a.jsx)(d.qr,{children:f(1,{id:"3",name:"lolkek",artist:"cheburek",image:"https://example.com/path-to-image.jpg"},g,k)}),(0,a.jsx)(d.qr,{children:f(1,{id:"4",name:"lolkek",artist:"cheburek",image:"https://example.com/path-to-image.jpg"},g,k)}),(0,a.jsx)(d.qr,{children:f(1,{id:"5",name:"lolkek",artist:"cheburek",image:"https://example.com/path-to-image.jpg"},g,k)})]})}let m={trackTitle:{fontSize:30,margin:10,fontWeight:"700",color:"#000"},artistName:{fontSize:25,margin:10,color:"#555",fontWeight:"500",marginTop:5},pauseButton:{padding:10,width:"5vmax",height:"5vmax",borderRadius:"100%",backgroundColor:"rgba(255, 255, 255, 0.3)",border:"none"},footer:{display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center",width:"80%",marginTop:20,marginBottom:20},iconButton:{display:"flex",color:"white",backgroundColor:"#1a1a1a",minWidth:40,minHeight:40,padding:0,margin:"8px",justifyContent:"center",alignItems:"center",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.2)",border:"none"}}}},e=>{var t=t=>e(e.s=t);e.O(0,[206,711,710,441,517,358],()=>t(8187)),_N_E=e.O()}]);